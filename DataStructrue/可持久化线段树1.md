```C++
void build(int l,int r,int &x){
    x=++id;
    if(l==r)return;
    int m=(l+r)>>1;
    build(lc(x),l,m);
    build(rc(x),m+1,r);
}
void insert(int x,int &y,int l,int r,int v){
    y=++idx;tr[y]=tr[x];tr[y].s++;
    if(l==r)return;
    int m==l+r>>1;
    if(v<=m)insert(lc(x),lc(y),l,m,v);
    else insert(rc(x),rc(y),m+1,r,v);
}
int query(int x,int y,int l,int r,int k){//查找[l,r]中的第k小
    if(l==r)return l;
    int m=l+r>>1;
    int s=tr[lc(y)].s-tr[lc(x)].s;
    if(k<=s)return query(lc(x),lc(y),l,m,k);
    else return query(rc(x),rc(y),m+1,r,k-s);
}
int getid(int x){//返回x的下标
    return lower_bound(v.begin(),v.end(),x)-v.begin()+1;

}
```